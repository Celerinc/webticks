<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanilla JS Tracker Example</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
        }

        nav {
            margin-bottom: 20px;
        }

        button {
            margin: 5px;
            padding: 10px;
        }

        h1 {
            color: #333;
        }
    </style>
</head>

<body>

    <h1>Vanilla JS Tracker Example</h1>
    <p>Open your browser's console to see the analytics events being queued and "sent" in batches.</p>

    <nav>
        <!-- These buttons use the History API to simulate a Single Page App (SPA) -->
        <button id="home">Go Home (pushState)</button>
        <button id="about">Go About (pushState)</button>
        <button id="contact">Go Contact (replaceState)</button>
    </nav>

    <p>Current simulated page: <span id="current-page">/</span></p>

    <button id="custom-event">Track Custom Event</button>

    <script type="module" src="/packages/core/tracker.js" defer></script>
    <script type="module" src="/packages/core/injector.js" defer></script>

    <script defer type="module">

        document.addEventListener('DOMContentLoaded', () => {
            const pageSpan = document.getElementById('current-page');

            document.getElementById('home').addEventListener('click', () => {
                history.pushState({ page: 'home' }, 'Home', '/');
                pageSpan.textContent = '/';
            });

            document.getElementById('about').addEventListener('click', () => {
                history.pushState({ page: 'about' }, 'About', '/about');
                pageSpan.textContent = '/about';
            });

            document.getElementById('contact').addEventListener('click', () => {
                history.replaceState({ page: 'contact' }, 'Contact', '/contact');
                pageSpan.textContent = '/contact';
            });

            document.getElementById('custom-event').addEventListener('click', () => {
                if (window.webticks) {
                    window.webticks.trackEvent('custom_button_click', { buttonId: 'custom-event' });
                } else {
                    console.error("Tracker not ready.");
                }
            });
        });
    </script>

</body>

</html>